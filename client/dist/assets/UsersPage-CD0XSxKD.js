import{j as e,R as x,u as m,r as o,a as h,_ as l,b as g,I as u}from"./index-C0qmoWQM.js";import{H as j,L as p}from"./LogoutBtn-BKBxKGxO.js";import{a as b}from"./axios-DTyqpfTh.js";const f=()=>e.jsxs("thead",{className:"",children:[e.jsxs("tr",{className:"border-2 border-green-600 bg-white text-green-600",children:[e.jsx("th",{className:"border-2 border-green-600 ",children:"ID"}),e.jsx("th",{className:"border-2 border-green-600 ",children:"Username"}),e.jsx("th",{className:"border-2 border-green-600 ",children:"Email"}),e.jsx("th",{className:"border-2 border-green-600 ",children:"Password"})]}),console.log("head re-rendered")]}),N=({border_giver:t,id:r,username:a,email:n,password:s})=>e.jsxs("tr",{className:`${t} text-white`,children:[console.log("user re-rendered"),e.jsx("td",{className:`${t} px-2 text-center`,children:r}),e.jsx("td",{className:`${t} px-2 text-center font-bold`,children:a}),e.jsx("td",{className:`${t} px-2 text-center`,children:n}),e.jsx("td",{className:`${t} p-4 text-left text-sm`,children:s})]}),i="border-2 border-white",w=t=>{console.log("users re-rendered");const r=t.users.map(a=>e.jsx(N,{border_giver:i,id:a._id,username:a.username,email:a.email,password:a.password},a._id));return e.jsxs("table",{className:`${i} m-auto bg-green-600 w-full`,children:[e.jsx(f,{}),e.jsx("tbody",{children:r})]})},E=x.memo(w),C=()=>{console.log("whole users page re-rendered");const t=m(),[r,a]=o.useState([]),{token:n}=o.useContext(h);return o.useEffect(()=>{console.log("token in usersPage: ",n),n?b.get("http://localhost:8000/users",{headers:{token:n}}).then(s=>{a(s.data.usersRecord),l.success(s.data.message,{position:"top-right",style:{height:"60px",border:"1px solid green"}})}).catch(s=>{var d,c;s.response.status==498&&t("/login"),(c=(d=s==null?void 0:s.response)==null?void 0:d.data)!=null&&c.message?l.error(s.response.data.message):l.error(s.message)}):t("/login")},[]),e.jsxs("div",{className:`min-h-[100%] bg-[#40670C] \r
        flex flex-col items-center gap-8 w-[100%] overflow-hidden`,children:[e.jsxs("div",{className:"flex justify-between px-[2px] items-center w-full",children:[e.jsx(g,{}),e.jsx(j,{}),e.jsx(p,{})]}),e.jsx(E,{users:r}),e.jsx(u,{})]})};export{C as default};
