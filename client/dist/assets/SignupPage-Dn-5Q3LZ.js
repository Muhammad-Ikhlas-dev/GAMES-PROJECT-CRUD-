import{j as e,r as i,u as x,I as f,_ as n,a as j,b}from"./index-C0qmoWQM.js";import{H as w}from"./login_left_img-JMlGJ1MF.js";import{a as v}from"./axios-DTyqpfTh.js";const N=()=>(console.log("signup left re-rendered"),e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-72",children:e.jsx("img",{className:"",src:w,alt:"unable to load"})})})),y=()=>{console.log("signupRight re-rendered");const[s,r]=i.useState({email:"",password:"",username:""}),[l,o]=i.useState(!1),u="w-80 h-8 px-2 outline-none text-white bg-transparent border-b-2 border-white placeholder-pink-500",g=x();async function h(t){var p,d,m,c;if(t.preventDefault(),o(!0),!s.email.includes("@gmail.com")){n.error("missing @gmail.com",{position:"top-right",style:{height:"60px",border:"1px solid green"}}),o(!1);return}try{let a=await v.post("http://localhost:8000/signup",s);n.success(a.data.message,{position:"top-right",style:{height:"60px",border:"1px solid green"}}),setTimeout(()=>{g("/login")},1e3)}catch(a){o(!1),(d=(p=a==null?void 0:a.response)==null?void 0:p.data)!=null&&d.issue?n.error(a.response.data.issue[0].message+" at "+a.response.data.issue[0].path):(c=(m=a==null?void 0:a.response)==null?void 0:m.data)!=null&&c.message?n.error(a.response.data.message,{position:"top-right",style:{height:"60px",border:"1px solid green"}}):n.error(a.message)}}return e.jsxs(e.Fragment,{children:[e.jsxs("form",{className:"flex flex-col gap-12 items-center",children:[e.jsx("h1",{className:"font-mono text-5xl",children:"SignUp"}),e.jsx("input",{value:s.username,onChange:t=>{r({...s,email:s.email,password:s.password,username:t.target.value})},required:!0,className:u,type:"username",placeholder:"Username"}),e.jsx("input",{value:s.email,onChange:t=>{r({...s,email:t.target.value,password:s.password,username:s.username})},className:u,type:"email",required:!0,placeholder:"Email"}),e.jsx("input",{value:s.password,onChange:t=>{r({...s,email:s.email,password:t.target.value})},required:!0,className:u,type:"password",placeholder:"Password"}),e.jsx("button",{className:"border-2 border-white font-bold w-20 font-mono hover:bg-pink-500",onClick:h,children:l?"Loading":"Submit"})]}),e.jsx(f,{})]})},_=()=>{console.log("signup page re-rendered");const{userData:s,setUserData:r,token:l,username:o}=i.useContext(j);return i.useEffect(()=>{localStorage.clear(),r({...s,email:"",username:"",password:"",token:""}),console.log("token at signup Page: ",l),console.log("username at signup Page: ",o)},[]),e.jsxs("div",{className:"h-[100%] bg-[#40670C] overflow-hidden text-white",children:[e.jsx("div",{className:"w-fit m-auto",children:e.jsx(b,{})}),e.jsxs("div",{className:"h-[100%] flex gap-20 items-center justify-center",children:[e.jsx(N,{}),e.jsx(y,{})]})]})};export{_ as default};
