import{j as e,r as l,u as p,a as x,I as S,_ as r,b as y}from"./index-C0qmoWQM.js";import{H as C}from"./login_left_img-JMlGJ1MF.js";import{a as I}from"./axios-DTyqpfTh.js";const _=()=>(console.log("loginleft  re-rendered"),e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-72",children:e.jsx("img",{className:"",src:C,alt:"unable to load"})})})),E=()=>{console.log("login right re-rendered");const[s,o]=l.useState({email:"",password:""}),[h,i]=l.useState(!1),w=p(),c="w-80 h-8 px-2 outline-none text-white bg-transparent border-b-2 border-white placeholder-pink-500",{userData:f,setUserData:b}=l.useContext(x),j=t=>{localStorage.setItem("token",t.data.token),localStorage.setItem("email",t.data.email),localStorage.setItem("username",t.data.username),localStorage.setItem("password",t.data.password),b({...f,token:t.data.token,username:t.data.username,password:t.data.password,email:t.data.email})},[n,v]=l.useState(!1),N=()=>{v(!n)};async function k(t){var d,m,g,u;t.preventDefault(),i(!0);try{let a=await I.post("http://localhost:8000/login",s);j(a),o({...s,email:"",password:""}),r.success(a.data.message,{position:"top-right",style:{height:"60px",border:"1px solid green"}}),w("/welcome")}catch(a){i(!1),(m=(d=a==null?void 0:a.response)==null?void 0:d.data)!=null&&m.issue?r.error(a.response.data.issue[0].message+" at "+a.response.data.issue[0].path):(u=(g=a==null?void 0:a.response)==null?void 0:g.data)!=null&&u.message?r.error(a.response.data.message):r.error(a.message)}}return e.jsxs(e.Fragment,{children:[e.jsxs("form",{className:"flex flex-col gap-12 items-center text-white",children:[e.jsx("h1",{className:"font-mono text-5xl",children:"LOGIN"}),e.jsx("input",{value:s.email,onChange:t=>{o({...s,email:t.target.value,password:s.password})},className:c,type:"email",placeholder:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{value:s.password,onChange:t=>{o({...s,email:s.email,password:t.target.value})},className:c,type:n?"text":"password",placeholder:"Password"}),e.jsx("button",{type:"button",onClick:N,className:"absolute right-2 top-2 text-gray-500",children:n?"👁️‍🗨️":"👁️"})]}),e.jsx("button",{className:`border-2 border-white font-bold\r
                 w-20 font-mono hover:bg-pink-500`,onClick:k,children:h?"Loading":"Submit"})]}),e.jsx(S,{})]})},V=()=>{console.log("login page re-rendered");const s=p(),{token:o}=l.useContext(x);return l.useEffect(()=>{console.log("token at login page: ",o),o&&s("/welcome")},[]),e.jsxs("div",{className:"h-[100%] bg-[#40670C] text-white",children:[e.jsx("div",{className:"w-fit m-auto",children:e.jsx(y,{})}),e.jsxs("div",{className:"flex gap-20 items-center justify-center mt-[5%]",children:[e.jsx(_,{}),e.jsx(E,{})]})]})};export{V as default};
